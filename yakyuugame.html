<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>å®Œæˆç‰ˆ é‡çƒã‚²ãƒ¼ãƒ </title>

  <!-- =====================
       ã‚¹ã‚¿ã‚¤ãƒ«è¨­å®š
       ===================== -->
  <style>
    body {
      text-align: center;
      font-family: sans-serif;
      background: #eef7ff;
    }

    h1 {
      margin-top: 10px;
    }

    /* ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ */
    #field {
      margin: 20px auto;
      width: 600px;
      height: 300px;
      border: 3px solid #333;
      background: #c8ffc8;
      position: relative;
      overflow: hidden;
    }

    /* ãƒœãƒ¼ãƒ« */
    #ball {
      width: 20px;
      height: 20px;
      background: white;
      border: 2px solid black;
      border-radius: 50%;
      position: absolute;
      left: 50px;
      top: 140px;
    }

    /* ãƒãƒƒãƒˆ */
    #bat {
      width: 10px;
      height: 80px;
      background: brown;
      position: absolute;
      left: 550px;
      top: 110px;
      transform-origin: bottom;
    }

    /* ã‚¹ã‚¤ãƒ³ã‚°è»Œé“ã®ç™½ã„ç‚¹ */
    .dot {
      width: 6px;
      height: 6px;
      background: white;
      border-radius: 50%;
      position: absolute;
      opacity: 0.8;
    }

    /* æƒ…å ±è¡¨ç¤º */
    #info {
      font-size: 20px;
      margin-top: 10px;
      min-height: 24px;
    }

    /* èª¬æ˜ã‚¨ãƒªã‚¢ */
    #desc {
      width: 600px;
      margin: 20px auto;
      background: white;
      border-radius: 10px;
      padding: 15px;
      text-align: left;
      line-height: 1.6;
    }
  </style>
</head>

<body>
  <h1>âš¾ å®Œæˆç‰ˆ é‡çƒã‚²ãƒ¼ãƒ </h1>
  <p>ã‚¹ãƒšãƒ¼ã‚¹ï¼šã‚¹ã‚¤ãƒ³ã‚° ï¼ Shiftï¼‹ã‚¹ãƒšãƒ¼ã‚¹ï¼šãƒãƒ³ãƒˆ</p>

  <!-- ã‚²ãƒ¼ãƒ ç”»é¢ -->
  <div id="field">
    <div id="ball"></div>
    <div id="bat"></div>
  </div>

  <!-- åˆ¤å®šè¡¨ç¤º -->
  <div id="info"></div>

  <!-- =====================
       ã‚²ãƒ¼ãƒ èª¬æ˜
       ===================== -->
  <div id="desc">
    <h3>ğŸ‰ ã“ã®å®Œæˆç‰ˆã§ã§ãã‚‹ã“ã¨</h3>

    <strong>1. æŠ•çƒã‚·ã‚¹ãƒ†ãƒ </strong><br>
    ãƒ»ã‚¹ãƒˆãƒ¬ãƒ¼ãƒˆ / ã‚«ãƒ¼ãƒ– / ãƒ•ã‚©ãƒ¼ã‚¯ã‚’è‡ªå‹•é¸æŠ<br>
    ãƒ»çƒé€Ÿãƒ»å¤‰åŒ–é‡ãƒ»ã‚³ãƒ¼ã‚¹ã¯ãƒ©ãƒ³ãƒ€ãƒ <br><br>

    <strong>2. ãƒãƒƒãƒˆè»Œé“ã®ç™½ã„ç‚¹ã€…</strong><br>
    ãƒ»ã‚¹ã‚¤ãƒ³ã‚°ã™ã‚‹ã¨è»Œé“ãŒç™½ã„ç‚¹ã§è¡¨ç¤º<br>
    ãƒ»ã‚¿ã‚¤ãƒŸãƒ³ã‚°ãŒè¦–è¦šçš„ã«åˆ†ã‹ã‚Šã€æ‰“ã¡ã‚„ã™ã„<br><br>

    <strong>3. ãƒãƒ³ãƒˆï¼ˆShiftï¼‹Spaceï¼‰</strong><br>
    ãƒ»ãƒãƒƒãƒˆãŒæ°´å¹³ã«ãªã‚‹<br>
    ãƒ»å¼±ã„æ‰“çƒã«ãªã‚‹<br>
    ãƒ»ãƒãƒ³ãƒˆå°‚ç”¨ã®è»Œé“ã‚‚è¡¨ç¤º<br><br>

    <strong>4. åˆ¤å®šã‚·ã‚¹ãƒ†ãƒ </strong><br>
    ãƒ»ãƒ’ãƒƒãƒˆ / ç©ºæŒ¯ã‚Š / ã‚¹ãƒˆãƒ©ã‚¤ã‚¯ / ãƒœãƒ¼ãƒ«<br>
    ãƒ»é‡çƒã¨ã—ã¦ã®åŸºæœ¬å‹•ä½œãŒã™ã¹ã¦æƒã£ã¦ã„ã‚‹
  </div>

  <!-- =====================
       JavaScript
       ===================== -->
  <script>
    // è¦ç´ å–å¾—
    const ball = document.getElementById("ball");
    const bat = document.getElementById("bat");
    const info = document.getElementById("info");
    const field = document.getElementById("field");

    // ãƒœãƒ¼ãƒ«ä½ç½®ã¨é€Ÿåº¦
    let ballX = 50;
    let ballY = 140;
    let speedX = 0;
    let speedY = 0;

    // ã‚¹ãƒˆãƒ©ã‚¤ã‚¯ã‚¾ãƒ¼ãƒ³
    const zoneTop = 100;
    const zoneBottom = 180;

    // æƒ…å ±è¡¨ç¤ºæ›´æ–°
    function updateInfo(text = "") {
      info.innerHTML = text;
    }

    // =====================
    // æŠ•çƒå‡¦ç†
    // =====================
    function pitch() {
      ballX = 50;
      ballY = 140;
      speedX = 4 + Math.random() * 4;

      const type = Math.floor(Math.random() * 3);

      if (type === 0) {
        updateInfo("ã‚¹ãƒˆãƒ¬ãƒ¼ãƒˆï¼");
        speedY = 0;
      } else if (type === 1) {
        updateInfo("ã‚«ãƒ¼ãƒ–ï¼");
        speedY = (Math.random() - 0.5) * 2;
      } else {
        updateInfo("ãƒ•ã‚©ãƒ¼ã‚¯ï¼");
        speedY = 2 + Math.random() * 2;
      }
    }

    // =====================
    // ã‚¹ã‚¤ãƒ³ã‚°è»Œé“
    // =====================
    function drawSwingDots() {
      for (let i = 0; i < 10; i++) {
        setTimeout(() => {
          const dot = document.createElement("div");
          dot.className = "dot";
          dot.style.left = (550 - i * 5) + "px";
          dot.style.top = (110 + Math.sin(i * 0.3) * 20) + "px";
          field.appendChild(dot);
          setTimeout(() => dot.remove(), 100);
        }, i * 10);
      }
    }

    function drawBuntDots() {
      for (let i = 0; i < 10; i++) {
        setTimeout(() => {
          const dot = document.createElement("div");
          dot.className = "dot";
          dot.style.left = (550 - i * 5) + "px";
          dot.style.top = "140px";
          field.appendChild(dot);
          setTimeout(() => dot.remove(), 100);
        }, i * 10);
      }
    }

    // =====================
    // ã‚¹ã‚¤ãƒ³ã‚°å‡¦ç†
    // =====================
    function swing(isBunt) {
      if (isBunt) {
        bat.style.transform = "rotate(0deg)";
        drawBuntDots();
      } else {
        bat.style.transform = "rotate(-60deg)";
        drawSwingDots();
      }

      // å½“ãŸã‚Šåˆ¤å®š
      if (ballX > 520 && ballX < 560) {
        if (isBunt) {
          updateInfo("ãƒãƒ³ãƒˆæˆåŠŸï¼");
          speedX = 1;
          speedY = 0;
        } else {
          updateInfo("ãƒ’ãƒƒãƒˆï¼");
          speedX = 6;
          speedY = (Math.random() - 0.5) * 4;
        }
      } else {
        updateInfo("ç©ºæŒ¯ã‚Šï¼");
      }

      setTimeout(() => {
        bat.style.transform = "rotate(0deg)";
      }, 200);
    }

    // =====================
    // ãƒ¡ã‚¤ãƒ³ãƒ«ãƒ¼ãƒ—
    // =====================
    function loop() {
      ballX += speedX;
      ballY += speedY;

      ball.style.left = ballX + "px";
      ball.style.top = ballY + "px";

      // ã‚­ãƒ£ãƒƒãƒãƒ£ãƒ¼åˆ°é”åˆ¤å®š
      if (ballX > 600) {
        if (ballY > zoneTop && ballY < zoneBottom) {
          updateInfo("ã‚¹ãƒˆãƒ©ã‚¤ã‚¯ï¼");
        } else {
          updateInfo("ãƒœãƒ¼ãƒ«ï¼");
        }
        pitch();
      }

      requestAnimationFrame(loop);
    }

    // ã‚­ãƒ¼æ“ä½œ
    document.body.onkeydown = (e) => {
      if (e.code === "Space") {
        swing(e.shiftKey);
      }
    };

    // åˆæœŸåŒ–
    pitch();
    loop();
  </script>
</body>
</html>
